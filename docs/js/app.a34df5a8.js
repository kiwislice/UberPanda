(function(t){function e(e){for(var a,i,s=e[0],c=e[1],u=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("3ebb"),r=n.n(a);r.a},"3ebb":function(t,e,n){var a=n("e31a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("499e").default;r("517436b3",a,!0,{sourceMap:!1,shadowMode:!1})},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("ul",{staticClass:"nav justify-content-center"},[n("router-link",{staticClass:"m-3 nav-link",attrs:{to:"/"}},[t._v("店家清單")]),n("router-link",{staticClass:"m-3 nav-link",attrs:{to:"/foo"}},[t._v("新增頁面")]),n("router-link",{staticClass:"m-3 nav-link",attrs:{to:"/pricecomputer"}},[t._v("金額計算")])],1),n("router-view")],1)},o=[],i={name:"App",data:function(){return{}},components:{}},s=i,c=(n("034f"),n("2877")),u=Object(c["a"])(s,r,o,!1,null,null,null),l=u.exports,p=n("8c4f"),d=n("5f5b"),m=(n("f9e3"),n("2dd8"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"storeview"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("a",{on:{click:t.onFoodpandaClick}},[a("img",{staticClass:"rounded img-thumbnail",staticStyle:{"max-width":"200px",cursor:"pointer"},attrs:{alt:"foodpanda",src:n("f8ab")}})]),a("ul",{staticClass:"list-group list-group-flush"},t._l(t.foodpanda,(function(e,n){return a("li",{key:n,staticClass:"list-group-item"},[a("div",{},[a("a",{attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.name))])])])})),0)]),a("div",{staticClass:"col"},[a("a",{on:{click:t.onUbereatClick}},[a("img",{staticClass:"rounded img-thumbnail",staticStyle:{"max-width":"200px",cursor:"pointer"},attrs:{alt:"ubereat",src:n("65ef")}})]),a("ul",{staticClass:"list-group list-group-flush"},t._l(t.ubereat,(function(e,n){return a("li",{key:n,staticClass:"list-group-item"},[a("div",{staticClass:"col-sm-12"},[a("a",{attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.name))])])])})),0)])])])}),f=[],v=(n("4160"),n("ac1f"),n("841c"),n("159b"),n("bc3a")),h=n.n(v),g={name:"App",data:function(){return{value:"",products:null,stores:[],ubereat:[],foodpanda:[],currentPlatform:"foodpanda"}},components:{},methods:{query:function(){var t=this;h.a.post("https://evident-lamprey-59.hasura.app/v1/graphql",{query:"query MyQuery {\n              store(distinct_on: id) {\n                id\n                name\n                url\n              }\n            } "}).then((function(e){return t.stores=e.data.data.store,t.stores.forEach((function(e){console.log(e),e.url.search("ubereat")>0&&t.ubereat.push(e),e.url.search("foodpanda")>0&&t.foodpanda.push(e)}))}))},onFoodpandaClick:function(){this.currentPlatform="foodpanda"},onUbereatClick:function(){this.currentPlatform="ubereat"}},created:function(){this.query()}},b=g,y=Object(c["a"])(b,m,f,!1,null,null,null),C=y.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"editstore"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editStore.name,expression:"editStore.name"}],staticClass:"mx-auto w-50 form-control",attrs:{type:"text",placeholder:"店名"},domProps:{value:t.editStore.name},on:{input:function(e){e.target.composing||t.$set(t.editStore,"name",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.editStore.url,expression:"editStore.url"}],staticClass:"mx-auto w-50 form-control mt-1",attrs:{type:"text",placeholder:"URL"},domProps:{value:t.editStore.url},on:{input:function(e){e.target.composing||t.$set(t.editStore,"url",e.target.value)}}}),n("div",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editStore.eaten,expression:"editStore.eaten"}],staticClass:"form-check-input",attrs:{type:"checkbox",for:"eatenCheck"},domProps:{checked:Array.isArray(t.editStore.eaten)?t._i(t.editStore.eaten,null)>-1:t.editStore.eaten},on:{change:function(e){var n=t.editStore.eaten,a=e.target,r=!!a.checked;if(Array.isArray(n)){var o=null,i=t._i(n,o);a.checked?i<0&&t.$set(t.editStore,"eaten",n.concat([o])):i>-1&&t.$set(t.editStore,"eaten",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.editStore,"eaten",r)}}}),n("label",{staticClass:"form-check-label",attrs:{for:"eatenCheck"}},[t._v(" 吃過了 ")])]),n("button",{staticClass:"mx-auto btn btn-primary my-1",attrs:{label:"新增"},on:{click:function(e){return t.createStore(e)}}},[t._v("新增")])]),n("div",{staticClass:"storelist"},t._l(t.stores,(function(e){return n("div",{key:e.id},[t._v(" "+t._s(e.id)+" "+t._s(e.name)+" ")])})),0)])},x=[],P=n("8785"),k=n("7506"),w=n("9530"),S=n.n(w);function j(){var t=Object(P["a"])(["\n  mutation addStore($name: String!, $url: String!, $eaten: Boolean!) {\n    insert_store_one(object: {name: $name, url: $url, eaten: $eaten}) {\n      id\n    }\n  }\n"]);return j=function(){return t},t}function F(){var t=Object(P["a"])(["\n  query allStore {\n    store(distinct_on: id) {\n      id\n      name\n      url\n    }\n  }\n"]);return F=function(){return t},t}var $=S()(F()),O=S()(j()),T={name:"Store",data:function(){return{value:"",stores:[{id:1,name:"wait",url:"wait"}],editStore:{name:null,url:null,eaten:!1}}},methods:{createStore:function(){var t=Object.assign({},this.editStore);console.log(t),h.a.post("https://evident-lamprey-59.hasura.app/v1/graphql",{query:Object(k["a"])(O),variables:t}).then((function(t){return console.log(t)}))},getStores:function(){var t=this;h.a.post("https://evident-lamprey-59.hasura.app/v1/graphql",{query:Object(k["a"])($)}).then((function(e){return t.stores=e.data.data.store}))}},mounted:function(){this.getStores()},components:{}},q=T,E=(n("f725"),Object(c["a"])(q,_,x,!1,null,"ad699664",null)),M=E.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pricecomputer"},[n("div",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.computeType,expression:"computeType"}],staticClass:"form-check-input",attrs:{type:"radio",id:"ctr1",value:"%"},domProps:{checked:t._q(t.computeType,"%")},on:{change:[function(e){t.computeType="%"},t.change]}}),n("label",{staticClass:"form-check-label",attrs:{for:"ctr1"}},[t._v(" 優惠% ")])]),n("div",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.computeType,expression:"computeType"}],staticClass:"form-check-input",attrs:{type:"radio",id:"ctr2",value:"P"},domProps:{checked:t._q(t.computeType,"P")},on:{change:[function(e){t.computeType="P"},t.change]}}),n("label",{staticClass:"form-check-label",attrs:{for:"ctr2"}},[t._v(" 優惠固定金額 ")])]),t.isComputeByPercent()?n("div",{staticClass:"input-group mb-3 mx-auto w-50"},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.discountPercent,expression:"discountPercent"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.discountPercent},on:{change:t.change,input:function(e){e.target.composing||(t.discountPercent=e.target.value)}}})]):t._e(),t.isComputeByPercent()?t._e():n("div",{staticClass:"input-group mb-3 mx-auto w-50"},[t._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:t.discount,expression:"discount"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.discount},on:{change:t.change,input:function(e){e.target.composing||(t.discount=e.target.value)}}})]),n("div",{staticClass:"input-group mb-3 mx-auto w-50"},[t._m(2),n("input",{directives:[{name:"model",rawName:"v-model",value:t.deliveryFee,expression:"deliveryFee"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.deliveryFee},on:{change:t.change,input:function(e){e.target.composing||(t.deliveryFee=e.target.value)}}})]),n("div",{staticClass:"input-group mb-3 mx-auto w-50"},[t._m(3),n("input",{directives:[{name:"model",rawName:"v-model",value:t.personCount,expression:"personCount"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.personCount},on:{change:t.change,input:function(e){e.target.composing||(t.personCount=e.target.value)}}})]),n("div",{staticClass:"alert alert-warning mx-auto w-50",attrs:{role:"alert"}},[t._v(" 應收總額："+t._s(t.realTotal)+" ")]),t._l(t.personalFee,(function(e){return n("div",{key:e.index,staticClass:"input-group my-2 mx-auto w-50"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("單人金額"+t._s(e.index))])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.originalPrice,expression:"per.originalPrice"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.originalPrice},on:{change:t.change,input:function(n){n.target.composing||t.$set(e,"originalPrice",n.target.value)}}}),n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text"},[t._v("應收金額："+t._s(e.realPrice))])])])}))],2)},B=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("優惠折扣%，例：85折請輸入0.85")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("優惠折扣金額")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("外送費")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("人數")])])}],A=(n("d81d"),n("13d5"),"%"),U={name:"PriceComputer",data:function(){return{computeType:A,discount:0,discountPercent:1,deliveryFee:0,personCount:0,personalFee:[],realTotal:0}},methods:{change:function(){this.initPersonalFee(),this.isComputeByPercent()?this.computeByPercent():this.computeByPrice()},computeByPrice:function(){var t=(this.discount-this.deliveryFee)/this.personCount;t=Math.round(t),this.personalFee.forEach((function(e){return e.realPrice=e.originalPrice-t})),this.realTotal=this.personalFee.map((function(t){return t.realPrice})).reduce((function(t,e){return t+e}),0)},computeByPercent:function(){var t=this,e=this.deliveryFee/this.personCount;this.personalFee.forEach((function(n){return n.realPrice=Math.round(n.originalPrice*t.discountPercent+e)})),this.realTotal=this.personalFee.map((function(t){return t.realPrice})).reduce((function(t,e){return t+e}),0)},isComputeByPercent:function(){return this.computeType==A},initPersonalFee:function(){while(this.personCount<this.personalFee.length)this.personalFee.pop();while(this.personCount>this.personalFee.length)this.personalFee.push({index:this.personalFee.length+1,originalPrice:0,realPrice:0})}},mounted:function(){},components:{}},J=U,z=Object(c["a"])(J,N,B,!1,null,"15af6f4e",null),H=z.exports;a["default"].config.productionTip=!1,a["default"].use(p["a"],d["a"]);var L={template:"<div>bar</div>"},Q=[{path:"/",component:C},{path:"/foo",component:M},{path:"/bar",component:L},{path:"/pricecomputer",component:H}],R=new p["a"]({mode:"hash",routes:Q});new a["default"]({router:R,render:function(t){return t(l)}}).$mount("#app")},"65ef":function(t,e,n){t.exports=n.p+"img/ubereat.9e9c37e9.jpg"},"6b8b":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,"h3[data-v-ad699664]{margin:40px 0 0}ul[data-v-ad699664]{list-style-type:none;padding:0}li[data-v-ad699664]{display:inline-block;margin:0 10px}a[data-v-ad699664]{color:#42b983}",""]),t.exports=e},"75f1":function(t,e,n){var a=n("6b8b");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("499e").default;r("6aed0b56",a,!0,{sourceMap:!1,shadowMode:!1})},e31a:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:10px}",""]),t.exports=e},f725:function(t,e,n){"use strict";var a=n("75f1"),r=n.n(a);r.a},f8ab:function(t,e,n){t.exports=n.p+"img/foodpanda.3456f88f.jpg"}});